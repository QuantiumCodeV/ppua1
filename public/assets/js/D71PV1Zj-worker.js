(function(){"use strict";function rt(i){"@babel/helpers - typeof";return rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},rt(i)}function et(i){if(i===null||i===!0||i===!1)return NaN;var s=Number(i);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}function G(i,s){if(s.length<i)throw new TypeError(i+" argument"+(i>1?"s":"")+" required, but only "+s.length+" present")}function J(i){G(1,arguments);var s=Object.prototype.toString.call(i);return i instanceof Date||rt(i)==="object"&&s==="[object Date]"?new Date(i.getTime()):typeof i=="number"||s==="[object Number]"?new Date(i):((typeof i=="string"||s==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function qt(i,s){G(2,arguments);var h=J(i).getTime(),p=et(s);return new Date(h+p)}var Wt=36e5;function Vt(i,s){G(2,arguments);var h=et(s);return qt(i,h*Wt)}function Jt(i,s){G(2,arguments);var h=J(i),p=J(s),y=h.getTime()-p.getTime();return y>0?-1:y<0?1:y}function Xt(i,s){G(2,arguments);var h=J(i),p=J(s);return h.getTime()>p.getTime()}function zt(i,s){G(2,arguments);var h=et(s);return Vt(i,-h)}const mt=(i,s)=>{const h=s.getIn([i.id,"timestamp"]),p=i.lastMessageTimestamp;return h&&Xt(new Date(h),new Date(p))?h:p};function Qt(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var gt={exports:{}},I=gt.exports={},_,M;function nt(){throw new Error("setTimeout has not been defined")}function it(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?_=setTimeout:_=nt}catch{_=nt}try{typeof clearTimeout=="function"?M=clearTimeout:M=it}catch{M=it}})();function xt(i){if(_===setTimeout)return setTimeout(i,0);if((_===nt||!_)&&setTimeout)return _=setTimeout,setTimeout(i,0);try{return _(i,0)}catch{try{return _.call(null,i,0)}catch{return _.call(this,i,0)}}}function Kt(i){if(M===clearTimeout)return clearTimeout(i);if((M===it||!M)&&clearTimeout)return M=clearTimeout,clearTimeout(i);try{return M(i)}catch{try{return M.call(null,i)}catch{return M.call(this,i)}}}var N=[],Y=!1,$,K=-1;function Zt(){!Y||!$||(Y=!1,$.length?N=$.concat(N):K=-1,N.length&&dt())}function dt(){if(!Y){var i=xt(Zt);Y=!0;for(var s=N.length;s;){for($=N,N=[];++K<s;)$&&$[K].run();K=-1,s=N.length}$=null,Y=!1,Kt(i)}}I.nextTick=function(i){var s=new Array(arguments.length-1);if(arguments.length>1)for(var h=1;h<arguments.length;h++)s[h-1]=arguments[h];N.push(new Bt(i,s)),N.length===1&&!Y&&xt(dt)};function Bt(i,s){this.fun=i,this.array=s}Bt.prototype.run=function(){this.fun.apply(null,this.array)},I.title="browser",I.browser=!0,I.env={},I.argv=[],I.version="",I.versions={};function k(){}I.on=k,I.addListener=k,I.once=k,I.off=k,I.removeListener=k,I.removeAllListeners=k,I.emit=k,I.prependListener=k,I.prependOnceListener=k,I.listeners=function(i){return[]},I.binding=function(i){throw new Error("process.binding is not supported")},I.cwd=function(){return"/"},I.chdir=function(i){throw new Error("process.chdir is not supported")},I.umask=function(){return 0};var vt=gt.exports;const ot=Qt(vt);var Et={},Z={};Z.byteLength=er,Z.toByteArray=ir,Z.fromByteArray=sr;for(var D=[],C=[],tr=typeof Uint8Array<"u"?Uint8Array:Array,ut="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",q=0,rr=ut.length;q<rr;++q)D[q]=ut[q],C[ut.charCodeAt(q)]=q;C[45]=62,C[95]=63;function Ft(i){var s=i.length;if(s%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var h=i.indexOf("=");h===-1&&(h=s);var p=h===s?0:4-h%4;return[h,p]}function er(i){var s=Ft(i),h=s[0],p=s[1];return(h+p)*3/4-p}function nr(i,s,h){return(s+h)*3/4-h}function ir(i){var s,h=Ft(i),p=h[0],y=h[1],a=new tr(nr(i,p,y)),l=0,m=y>0?p-4:p,g;for(g=0;g<m;g+=4)s=C[i.charCodeAt(g)]<<18|C[i.charCodeAt(g+1)]<<12|C[i.charCodeAt(g+2)]<<6|C[i.charCodeAt(g+3)],a[l++]=s>>16&255,a[l++]=s>>8&255,a[l++]=s&255;return y===2&&(s=C[i.charCodeAt(g)]<<2|C[i.charCodeAt(g+1)]>>4,a[l++]=s&255),y===1&&(s=C[i.charCodeAt(g)]<<10|C[i.charCodeAt(g+1)]<<4|C[i.charCodeAt(g+2)]>>2,a[l++]=s>>8&255,a[l++]=s&255),a}function or(i){return D[i>>18&63]+D[i>>12&63]+D[i>>6&63]+D[i&63]}function ur(i,s,h){for(var p,y=[],a=s;a<h;a+=3)p=(i[a]<<16&16711680)+(i[a+1]<<8&65280)+(i[a+2]&255),y.push(or(p));return y.join("")}function sr(i){for(var s,h=i.length,p=h%3,y=[],a=16383,l=0,m=h-p;l<m;l+=a)y.push(ur(i,l,l+a>m?m:l+a));return p===1?(s=i[h-1],y.push(D[s>>2]+D[s<<4&63]+"==")):p===2&&(s=(i[h-2]<<8)+i[h-1],y.push(D[s>>10]+D[s>>4&63]+D[s<<2&63]+"=")),y.join("")}var st={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */st.read=function(i,s,h,p,y){var a,l,m=y*8-p-1,g=(1<<m)-1,T=g>>1,u=-7,S=h?y-1:0,O=h?-1:1,R=i[s+S];for(S+=O,a=R&(1<<-u)-1,R>>=-u,u+=m;u>0;a=a*256+i[s+S],S+=O,u-=8);for(l=a&(1<<-u)-1,a>>=-u,u+=p;u>0;l=l*256+i[s+S],S+=O,u-=8);if(a===0)a=1-T;else{if(a===g)return l?NaN:(R?-1:1)*(1/0);l=l+Math.pow(2,p),a=a-T}return(R?-1:1)*l*Math.pow(2,a-p)},st.write=function(i,s,h,p,y,a){var l,m,g,T=a*8-y-1,u=(1<<T)-1,S=u>>1,O=y===23?Math.pow(2,-24)-Math.pow(2,-77):0,R=p?0:a-1,j=p?1:-1,ft=s<0||s===0&&1/s<0?1:0;for(s=Math.abs(s),isNaN(s)||s===1/0?(m=isNaN(s)?1:0,l=u):(l=Math.floor(Math.log(s)/Math.LN2),s*(g=Math.pow(2,-l))<1&&(l--,g*=2),l+S>=1?s+=O/g:s+=O*Math.pow(2,1-S),s*g>=2&&(l++,g/=2),l+S>=u?(m=0,l=u):l+S>=1?(m=(s*g-1)*Math.pow(2,y),l=l+S):(m=s*Math.pow(2,S-1)*Math.pow(2,y),l=0));y>=8;i[h+R]=m&255,R+=j,m/=256,y-=8);for(l=l<<y|m,T+=y;T>0;i[h+R]=l&255,R+=j,l/=256,T-=8);i[h+R-j]|=ft*128};/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */(function(i){const s=Z,h=st,p=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;i.Buffer=u,i.SlowBuffer=Fr,i.INSPECT_MAX_BYTES=50;const y=2147483647;i.kMaxLength=y;const{Uint8Array:a,ArrayBuffer:l,SharedArrayBuffer:m}=globalThis;u.TYPED_ARRAY_SUPPORT=g(),!u.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function g(){try{const e=new a(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,a.prototype),Object.setPrototypeOf(e,t),e.foo()===42}catch{return!1}}Object.defineProperty(u.prototype,"parent",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.buffer}}),Object.defineProperty(u.prototype,"offset",{enumerable:!0,get:function(){if(u.isBuffer(this))return this.byteOffset}});function T(e){if(e>y)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new a(e);return Object.setPrototypeOf(t,u.prototype),t}function u(e,t,r){if(typeof e=="number"){if(typeof t=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return j(e)}return S(e,t,r)}u.poolSize=8192;function S(e,t,r){if(typeof e=="string")return ft(e,t);if(l.isView(e))return Br(e);if(e==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(L(e,l)||e&&L(e.buffer,l)||typeof m<"u"&&(L(e,m)||e&&L(e.buffer,m)))return at(e,t,r);if(typeof e=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(n!=null&&n!==e)return u.from(n,t,r);const o=Er(e);if(o)return o;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof e[Symbol.toPrimitive]=="function")return u.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}u.from=function(e,t,r){return S(e,t,r)},Object.setPrototypeOf(u.prototype,a.prototype),Object.setPrototypeOf(u,a);function O(e){if(typeof e!="number")throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function R(e,t,r){return O(e),e<=0?T(e):t!==void 0?typeof r=="string"?T(e).fill(t,r):T(e).fill(t):T(e)}u.alloc=function(e,t,r){return R(e,t,r)};function j(e){return O(e),T(e<0?0:lt(e)|0)}u.allocUnsafe=function(e){return j(e)},u.allocUnsafeSlow=function(e){return j(e)};function ft(e,t){if((typeof t!="string"||t==="")&&(t="utf8"),!u.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=_t(e,t)|0;let n=T(r);const o=n.write(e,t);return o!==r&&(n=n.slice(0,o)),n}function ht(e){const t=e.length<0?0:lt(e.length)|0,r=T(t);for(let n=0;n<t;n+=1)r[n]=e[n]&255;return r}function Br(e){if(L(e,a)){const t=new a(e);return at(t.buffer,t.byteOffset,t.byteLength)}return ht(e)}function at(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return t===void 0&&r===void 0?n=new a(e):r===void 0?n=new a(e,t):n=new a(e,t,r),Object.setPrototypeOf(n,u.prototype),n}function Er(e){if(u.isBuffer(e)){const t=lt(e.length)|0,r=T(t);return r.length===0||e.copy(r,0,0,t),r}if(e.length!==void 0)return typeof e.length!="number"||wt(e.length)?T(0):ht(e);if(e.type==="Buffer"&&Array.isArray(e.data))return ht(e.data)}function lt(e){if(e>=y)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+y.toString(16)+" bytes");return e|0}function Fr(e){return+e!=e&&(e=0),u.alloc(+e)}u.isBuffer=function(t){return t!=null&&t._isBuffer===!0&&t!==u.prototype},u.compare=function(t,r){if(L(t,a)&&(t=u.from(t,t.offset,t.byteLength)),L(r,a)&&(r=u.from(r,r.offset,r.byteLength)),!u.isBuffer(t)||!u.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===r)return 0;let n=t.length,o=r.length;for(let c=0,f=Math.min(n,o);c<f;++c)if(t[c]!==r[c]){n=t[c],o=r[c];break}return n<o?-1:o<n?1:0},u.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},u.concat=function(t,r){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(t.length===0)return u.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<t.length;++n)r+=t[n].length;const o=u.allocUnsafe(r);let c=0;for(n=0;n<t.length;++n){let f=t[n];if(L(f,a))c+f.length>o.length?(u.isBuffer(f)||(f=u.from(f)),f.copy(o,c)):a.prototype.set.call(o,f,c);else if(u.isBuffer(f))f.copy(o,c);else throw new TypeError('"list" argument must be an Array of Buffers');c+=f.length}return o};function _t(e,t){if(u.isBuffer(e))return e.length;if(l.isView(e)||L(e,l))return e.byteLength;if(typeof e!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return yt(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Yt(e).length;default:if(o)return n?-1:yt(e).length;t=(""+t).toLowerCase(),o=!0}}u.byteLength=_t;function Ir(e,t,r){let n=!1;if((t===void 0||t<0)&&(t=0),t>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,t>>>=0,r<=t))return"";for(e||(e="utf8");;)switch(e){case"hex":return Dr(this,t,r);case"utf8":case"utf-8":return Lt(this,t,r);case"ascii":return _r(this,t,r);case"latin1":case"binary":return Mr(this,t,r);case"base64":return Cr(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Lr(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}u.prototype._isBuffer=!0;function H(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}u.prototype.swap16=function(){const t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<t;r+=2)H(this,r,r+1);return this},u.prototype.swap32=function(){const t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<t;r+=4)H(this,r,r+3),H(this,r+1,r+2);return this},u.prototype.swap64=function(){const t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<t;r+=8)H(this,r,r+7),H(this,r+1,r+6),H(this,r+2,r+5),H(this,r+3,r+4);return this},u.prototype.toString=function(){const t=this.length;return t===0?"":arguments.length===0?Lt(this,0,t):Ir.apply(this,arguments)},u.prototype.toLocaleString=u.prototype.toString,u.prototype.equals=function(t){if(!u.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t?!0:u.compare(this,t)===0},u.prototype.inspect=function(){let t="";const r=i.INSPECT_MAX_BYTES;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},p&&(u.prototype[p]=u.prototype.inspect),u.prototype.compare=function(t,r,n,o,c){if(L(t,a)&&(t=u.from(t,t.offset,t.byteLength)),!u.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(r===void 0&&(r=0),n===void 0&&(n=t?t.length:0),o===void 0&&(o=0),c===void 0&&(c=this.length),r<0||n>t.length||o<0||c>this.length)throw new RangeError("out of range index");if(o>=c&&r>=n)return 0;if(o>=c)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,o>>>=0,c>>>=0,this===t)return 0;let f=c-o,w=n-r;const E=Math.min(f,w),B=this.slice(o,c),F=t.slice(r,n);for(let d=0;d<E;++d)if(B[d]!==F[d]){f=B[d],w=F[d];break}return f<w?-1:w<f?1:0};function Mt(e,t,r,n,o){if(e.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,wt(r)&&(r=o?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(o)return-1;r=e.length-1}else if(r<0)if(o)r=0;else return-1;if(typeof t=="string"&&(t=u.from(t,n)),u.isBuffer(t))return t.length===0?-1:Dt(e,t,r,n,o);if(typeof t=="number")return t=t&255,typeof a.prototype.indexOf=="function"?o?a.prototype.indexOf.call(e,t,r):a.prototype.lastIndexOf.call(e,t,r):Dt(e,[t],r,n,o);throw new TypeError("val must be string, number or Buffer")}function Dt(e,t,r,n,o){let c=1,f=e.length,w=t.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(e.length<2||t.length<2)return-1;c=2,f/=2,w/=2,r/=2}function E(F,d){return c===1?F[d]:F.readUInt16BE(d*c)}let B;if(o){let F=-1;for(B=r;B<f;B++)if(E(e,B)===E(t,F===-1?0:B-F)){if(F===-1&&(F=B),B-F+1===w)return F*c}else F!==-1&&(B-=B-F),F=-1}else for(r+w>f&&(r=f-w),B=r;B>=0;B--){let F=!0;for(let d=0;d<w;d++)if(E(e,B+d)!==E(t,d)){F=!1;break}if(F)return B}return-1}u.prototype.includes=function(t,r,n){return this.indexOf(t,r,n)!==-1},u.prototype.indexOf=function(t,r,n){return Mt(this,t,r,n,!0)},u.prototype.lastIndexOf=function(t,r,n){return Mt(this,t,r,n,!1)};function Tr(e,t,r,n){r=Number(r)||0;const o=e.length-r;n?(n=Number(n),n>o&&(n=o)):n=o;const c=t.length;n>c/2&&(n=c/2);let f;for(f=0;f<n;++f){const w=parseInt(t.substr(f*2,2),16);if(wt(w))return f;e[r+f]=w}return f}function Sr(e,t,r,n){return tt(yt(t,e.length-r),e,r,n)}function Ar(e,t,r,n){return tt(Pr(t),e,r,n)}function br(e,t,r,n){return tt(Yt(t),e,r,n)}function Ur(e,t,r,n){return tt($r(t,e.length-r),e,r,n)}u.prototype.write=function(t,r,n,o){if(r===void 0)o="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")o=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,o===void 0&&(o="utf8")):(o=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const c=this.length-r;if((n===void 0||n>c)&&(n=c),t.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");o||(o="utf8");let f=!1;for(;;)switch(o){case"hex":return Tr(this,t,r,n);case"utf8":case"utf-8":return Sr(this,t,r,n);case"ascii":case"latin1":case"binary":return Ar(this,t,r,n);case"base64":return br(this,t,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Ur(this,t,r,n);default:if(f)throw new TypeError("Unknown encoding: "+o);o=(""+o).toLowerCase(),f=!0}},u.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Cr(e,t,r){return t===0&&r===e.length?s.fromByteArray(e):s.fromByteArray(e.slice(t,r))}function Lt(e,t,r){r=Math.min(e.length,r);const n=[];let o=t;for(;o<r;){const c=e[o];let f=null,w=c>239?4:c>223?3:c>191?2:1;if(o+w<=r){let E,B,F,d;switch(w){case 1:c<128&&(f=c);break;case 2:E=e[o+1],(E&192)===128&&(d=(c&31)<<6|E&63,d>127&&(f=d));break;case 3:E=e[o+1],B=e[o+2],(E&192)===128&&(B&192)===128&&(d=(c&15)<<12|(E&63)<<6|B&63,d>2047&&(d<55296||d>57343)&&(f=d));break;case 4:E=e[o+1],B=e[o+2],F=e[o+3],(E&192)===128&&(B&192)===128&&(F&192)===128&&(d=(c&15)<<18|(E&63)<<12|(B&63)<<6|F&63,d>65535&&d<1114112&&(f=d))}}f===null?(f=65533,w=1):f>65535&&(f-=65536,n.push(f>>>10&1023|55296),f=56320|f&1023),n.push(f),o+=w}return Rr(n)}const Nt=4096;function Rr(e){const t=e.length;if(t<=Nt)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=Nt));return r}function _r(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]&127);return n}function Mr(e,t,r){let n="";r=Math.min(e.length,r);for(let o=t;o<r;++o)n+=String.fromCharCode(e[o]);return n}function Dr(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let o="";for(let c=t;c<r;++c)o+=jr[e[c]];return o}function Lr(e,t,r){const n=e.slice(t,r);let o="";for(let c=0;c<n.length-1;c+=2)o+=String.fromCharCode(n[c]+n[c+1]*256);return o}u.prototype.slice=function(t,r){const n=this.length;t=~~t,r=r===void 0?n:~~r,t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<t&&(r=t);const o=this.subarray(t,r);return Object.setPrototypeOf(o,u.prototype),o};function A(e,t,r){if(e%1!==0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}u.prototype.readUintLE=u.prototype.readUIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||A(t,r,this.length);let o=this[t],c=1,f=0;for(;++f<r&&(c*=256);)o+=this[t+f]*c;return o},u.prototype.readUintBE=u.prototype.readUIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||A(t,r,this.length);let o=this[t+--r],c=1;for(;r>0&&(c*=256);)o+=this[t+--r]*c;return o},u.prototype.readUint8=u.prototype.readUInt8=function(t,r){return t=t>>>0,r||A(t,1,this.length),this[t]},u.prototype.readUint16LE=u.prototype.readUInt16LE=function(t,r){return t=t>>>0,r||A(t,2,this.length),this[t]|this[t+1]<<8},u.prototype.readUint16BE=u.prototype.readUInt16BE=function(t,r){return t=t>>>0,r||A(t,2,this.length),this[t]<<8|this[t+1]},u.prototype.readUint32LE=u.prototype.readUInt32LE=function(t,r){return t=t>>>0,r||A(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+this[t+3]*16777216},u.prototype.readUint32BE=u.prototype.readUInt32BE=function(t,r){return t=t>>>0,r||A(t,4,this.length),this[t]*16777216+(this[t+1]<<16|this[t+2]<<8|this[t+3])},u.prototype.readBigUInt64LE=P(function(t){t=t>>>0,V(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Q(t,this.length-8);const o=r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24,c=this[++t]+this[++t]*2**8+this[++t]*2**16+n*2**24;return BigInt(o)+(BigInt(c)<<BigInt(32))}),u.prototype.readBigUInt64BE=P(function(t){t=t>>>0,V(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Q(t,this.length-8);const o=r*2**24+this[++t]*2**16+this[++t]*2**8+this[++t],c=this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n;return(BigInt(o)<<BigInt(32))+BigInt(c)}),u.prototype.readIntLE=function(t,r,n){t=t>>>0,r=r>>>0,n||A(t,r,this.length);let o=this[t],c=1,f=0;for(;++f<r&&(c*=256);)o+=this[t+f]*c;return c*=128,o>=c&&(o-=Math.pow(2,8*r)),o},u.prototype.readIntBE=function(t,r,n){t=t>>>0,r=r>>>0,n||A(t,r,this.length);let o=r,c=1,f=this[t+--o];for(;o>0&&(c*=256);)f+=this[t+--o]*c;return c*=128,f>=c&&(f-=Math.pow(2,8*r)),f},u.prototype.readInt8=function(t,r){return t=t>>>0,r||A(t,1,this.length),this[t]&128?(255-this[t]+1)*-1:this[t]},u.prototype.readInt16LE=function(t,r){t=t>>>0,r||A(t,2,this.length);const n=this[t]|this[t+1]<<8;return n&32768?n|4294901760:n},u.prototype.readInt16BE=function(t,r){t=t>>>0,r||A(t,2,this.length);const n=this[t+1]|this[t]<<8;return n&32768?n|4294901760:n},u.prototype.readInt32LE=function(t,r){return t=t>>>0,r||A(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},u.prototype.readInt32BE=function(t,r){return t=t>>>0,r||A(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},u.prototype.readBigInt64LE=P(function(t){t=t>>>0,V(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Q(t,this.length-8);const o=this[t+4]+this[t+5]*2**8+this[t+6]*2**16+(n<<24);return(BigInt(o)<<BigInt(32))+BigInt(r+this[++t]*2**8+this[++t]*2**16+this[++t]*2**24)}),u.prototype.readBigInt64BE=P(function(t){t=t>>>0,V(t,"offset");const r=this[t],n=this[t+7];(r===void 0||n===void 0)&&Q(t,this.length-8);const o=(r<<24)+this[++t]*2**16+this[++t]*2**8+this[++t];return(BigInt(o)<<BigInt(32))+BigInt(this[++t]*2**24+this[++t]*2**16+this[++t]*2**8+n)}),u.prototype.readFloatLE=function(t,r){return t=t>>>0,r||A(t,4,this.length),h.read(this,t,!0,23,4)},u.prototype.readFloatBE=function(t,r){return t=t>>>0,r||A(t,4,this.length),h.read(this,t,!1,23,4)},u.prototype.readDoubleLE=function(t,r){return t=t>>>0,r||A(t,8,this.length),h.read(this,t,!0,52,8)},u.prototype.readDoubleBE=function(t,r){return t=t>>>0,r||A(t,8,this.length),h.read(this,t,!1,52,8)};function b(e,t,r,n,o,c){if(!u.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<c)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}u.prototype.writeUintLE=u.prototype.writeUIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){const w=Math.pow(2,8*n)-1;b(this,t,r,n,w,0)}let c=1,f=0;for(this[r]=t&255;++f<n&&(c*=256);)this[r+f]=t/c&255;return r+n},u.prototype.writeUintBE=u.prototype.writeUIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,n=n>>>0,!o){const w=Math.pow(2,8*n)-1;b(this,t,r,n,w,0)}let c=n-1,f=1;for(this[r+c]=t&255;--c>=0&&(f*=256);)this[r+c]=t/f&255;return r+n},u.prototype.writeUint8=u.prototype.writeUInt8=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,1,255,0),this[r]=t&255,r+1},u.prototype.writeUint16LE=u.prototype.writeUInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,2,65535,0),this[r]=t&255,this[r+1]=t>>>8,r+2},u.prototype.writeUint16BE=u.prototype.writeUInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,2,65535,0),this[r]=t>>>8,this[r+1]=t&255,r+2},u.prototype.writeUint32LE=u.prototype.writeUInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,4,4294967295,0),this[r+3]=t>>>24,this[r+2]=t>>>16,this[r+1]=t>>>8,this[r]=t&255,r+4},u.prototype.writeUint32BE=u.prototype.writeUInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,4,4294967295,0),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4};function kt(e,t,r,n,o){Gt(t,n,o,e,r,7);let c=Number(t&BigInt(4294967295));e[r++]=c,c=c>>8,e[r++]=c,c=c>>8,e[r++]=c,c=c>>8,e[r++]=c;let f=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=f,f=f>>8,e[r++]=f,f=f>>8,e[r++]=f,f=f>>8,e[r++]=f,r}function Ot(e,t,r,n,o){Gt(t,n,o,e,r,7);let c=Number(t&BigInt(4294967295));e[r+7]=c,c=c>>8,e[r+6]=c,c=c>>8,e[r+5]=c,c=c>>8,e[r+4]=c;let f=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=f,f=f>>8,e[r+2]=f,f=f>>8,e[r+1]=f,f=f>>8,e[r]=f,r+8}u.prototype.writeBigUInt64LE=P(function(t,r=0){return kt(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeBigUInt64BE=P(function(t,r=0){return Ot(this,t,r,BigInt(0),BigInt("0xffffffffffffffff"))}),u.prototype.writeIntLE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){const E=Math.pow(2,8*n-1);b(this,t,r,n,E-1,-E)}let c=0,f=1,w=0;for(this[r]=t&255;++c<n&&(f*=256);)t<0&&w===0&&this[r+c-1]!==0&&(w=1),this[r+c]=(t/f>>0)-w&255;return r+n},u.prototype.writeIntBE=function(t,r,n,o){if(t=+t,r=r>>>0,!o){const E=Math.pow(2,8*n-1);b(this,t,r,n,E-1,-E)}let c=n-1,f=1,w=0;for(this[r+c]=t&255;--c>=0&&(f*=256);)t<0&&w===0&&this[r+c+1]!==0&&(w=1),this[r+c]=(t/f>>0)-w&255;return r+n},u.prototype.writeInt8=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,1,127,-128),t<0&&(t=255+t+1),this[r]=t&255,r+1},u.prototype.writeInt16LE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,2,32767,-32768),this[r]=t&255,this[r+1]=t>>>8,r+2},u.prototype.writeInt16BE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,2,32767,-32768),this[r]=t>>>8,this[r+1]=t&255,r+2},u.prototype.writeInt32LE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,4,2147483647,-2147483648),this[r]=t&255,this[r+1]=t>>>8,this[r+2]=t>>>16,this[r+3]=t>>>24,r+4},u.prototype.writeInt32BE=function(t,r,n){return t=+t,r=r>>>0,n||b(this,t,r,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[r]=t>>>24,this[r+1]=t>>>16,this[r+2]=t>>>8,this[r+3]=t&255,r+4},u.prototype.writeBigInt64LE=P(function(t,r=0){return kt(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),u.prototype.writeBigInt64BE=P(function(t,r=0){return Ot(this,t,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Pt(e,t,r,n,o,c){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function $t(e,t,r,n,o){return t=+t,r=r>>>0,o||Pt(e,t,r,4),h.write(e,t,r,n,23,4),r+4}u.prototype.writeFloatLE=function(t,r,n){return $t(this,t,r,!0,n)},u.prototype.writeFloatBE=function(t,r,n){return $t(this,t,r,!1,n)};function jt(e,t,r,n,o){return t=+t,r=r>>>0,o||Pt(e,t,r,8),h.write(e,t,r,n,52,8),r+8}u.prototype.writeDoubleLE=function(t,r,n){return jt(this,t,r,!0,n)},u.prototype.writeDoubleBE=function(t,r,n){return jt(this,t,r,!1,n)},u.prototype.copy=function(t,r,n,o){if(!u.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),!o&&o!==0&&(o=this.length),r>=t.length&&(r=t.length),r||(r=0),o>0&&o<n&&(o=n),o===n||t.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(o<0)throw new RangeError("sourceEnd out of bounds");o>this.length&&(o=this.length),t.length-r<o-n&&(o=t.length-r+n);const c=o-n;return this===t&&typeof a.prototype.copyWithin=="function"?this.copyWithin(r,n,o):a.prototype.set.call(t,this.subarray(n,o),r),c},u.prototype.fill=function(t,r,n,o){if(typeof t=="string"){if(typeof r=="string"?(o=r,r=0,n=this.length):typeof n=="string"&&(o=n,n=this.length),o!==void 0&&typeof o!="string")throw new TypeError("encoding must be a string");if(typeof o=="string"&&!u.isEncoding(o))throw new TypeError("Unknown encoding: "+o);if(t.length===1){const f=t.charCodeAt(0);(o==="utf8"&&f<128||o==="latin1")&&(t=f)}}else typeof t=="number"?t=t&255:typeof t=="boolean"&&(t=Number(t));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,t||(t=0);let c;if(typeof t=="number")for(c=r;c<n;++c)this[c]=t;else{const f=u.isBuffer(t)?t:u.from(t,o),w=f.length;if(w===0)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(c=0;c<n-r;++c)this[c+r]=f[c%w]}return this};const W={};function pt(e,t,r){W[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(o){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:o,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}pt("ERR_BUFFER_OUT_OF_BOUNDS",function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),pt("ERR_INVALID_ARG_TYPE",function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`},TypeError),pt("ERR_OUT_OF_RANGE",function(e,t,r){let n=`The value of "${e}" is out of range.`,o=r;return Number.isInteger(r)&&Math.abs(r)>2**32?o=Ht(String(r)):typeof r=="bigint"&&(o=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(o=Ht(o)),o+="n"),n+=` It must be ${t}. Received ${o}`,n},RangeError);function Ht(e){let t="",r=e.length;const n=e[0]==="-"?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function Nr(e,t,r){V(t,"offset"),(e[t]===void 0||e[t+r]===void 0)&&Q(t,e.length-(r+1))}function Gt(e,t,r,n,o,c){if(e>r||e<t){const f=typeof t=="bigint"?"n":"";let w;throw t===0||t===BigInt(0)?w=`>= 0${f} and < 2${f} ** ${(c+1)*8}${f}`:w=`>= -(2${f} ** ${(c+1)*8-1}${f}) and < 2 ** ${(c+1)*8-1}${f}`,new W.ERR_OUT_OF_RANGE("value",w,e)}Nr(n,o,c)}function V(e,t){if(typeof e!="number")throw new W.ERR_INVALID_ARG_TYPE(t,"number",e)}function Q(e,t,r){throw Math.floor(e)!==e?(V(e,r),new W.ERR_OUT_OF_RANGE("offset","an integer",e)):t<0?new W.ERR_BUFFER_OUT_OF_BOUNDS:new W.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${t}`,e)}const kr=/[^+/0-9A-Za-z-_]/g;function Or(e){if(e=e.split("=")[0],e=e.trim().replace(kr,""),e.length<2)return"";for(;e.length%4!==0;)e=e+"=";return e}function yt(e,t){t=t||1/0;let r;const n=e.length;let o=null;const c=[];for(let f=0;f<n;++f){if(r=e.charCodeAt(f),r>55295&&r<57344){if(!o){if(r>56319){(t-=3)>-1&&c.push(239,191,189);continue}else if(f+1===n){(t-=3)>-1&&c.push(239,191,189);continue}o=r;continue}if(r<56320){(t-=3)>-1&&c.push(239,191,189),o=r;continue}r=(o-55296<<10|r-56320)+65536}else o&&(t-=3)>-1&&c.push(239,191,189);if(o=null,r<128){if((t-=1)<0)break;c.push(r)}else if(r<2048){if((t-=2)<0)break;c.push(r>>6|192,r&63|128)}else if(r<65536){if((t-=3)<0)break;c.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((t-=4)<0)break;c.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return c}function Pr(e){const t=[];for(let r=0;r<e.length;++r)t.push(e.charCodeAt(r)&255);return t}function $r(e,t){let r,n,o;const c=[];for(let f=0;f<e.length&&!((t-=2)<0);++f)r=e.charCodeAt(f),n=r>>8,o=r%256,c.push(o),c.push(n);return c}function Yt(e){return s.toByteArray(Or(e))}function tt(e,t,r,n){let o;for(o=0;o<n&&!(o+r>=t.length||o>=e.length);++o)t[o+r]=e[o];return o}function L(e,t){return e instanceof t||e!=null&&e.constructor!=null&&e.constructor.name!=null&&e.constructor.name===t.name}function wt(e){return e!==e}const jr=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=r*16;for(let o=0;o<16;++o)t[n+o]=e[r]+e[o]}return t}();function P(e){return typeof BigInt>"u"?Hr:e}function Hr(){throw new Error("BigInt not supported")}})(Et);const cr=Et.Buffer;for(var ct=Math.floor(Math.random()*16777215),It=x.index=parseInt(Math.random()*16777215,10),Tt=(typeof ot>"u"||typeof ot.pid!="number"?Math.floor(Math.random()*1e5):ot.pid)%65535,St=(()=>{try{return _Buffer}catch{try{return cr}catch{return null}}})(),v=function(i){return!!(i!=null&&i.constructor&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i))},At=[],U=0;U<256;U++)At[U]=(U<=15?"0":"")+U.toString(16);var bt=new RegExp("^[0-9a-fA-F]{24}$"),X=[];for(U=0;U<10;)X[48+U]=U++;for(;U<16;)X[55+U]=X[87+U]=U++;function x(i){if(!(this instanceof x))return new x(i);if(i&&(i instanceof x||i._bsontype==="ObjectID"))return i;if(this._bsontype="ObjectID",i==null||typeof i=="number"){this.id=this.generate(i);return}var s=x.isValid(i);if(!s&&i!=null)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");if(s&&typeof i=="string"&&i.length===24)return x.createFromHexString(i);if(i!=null&&i.length===12)this.id=i;else{if(i!=null&&typeof i.toHexString=="function")return i;throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters")}}x.default=x,x.createFromTime=function(i){return i=parseInt(i,10)%4294967295,new x(hr(8,i)+"0000000000000000")},x.createFromHexString=function(i){if(typeof i>"u"||i!=null&&i.length!==24)throw new Error("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");for(var s="",h=0;h<24;)s+=String.fromCharCode(X[i.charCodeAt(h++)]<<4|X[i.charCodeAt(h++)]);return new x(s)},x.isValid=function(i){return i==null?!1:typeof i=="number"?!0:typeof i=="string"?i.length===12||i.length===24&&bt.test(i):i instanceof x?!0:v(i)?x.isValid(i.toString("hex")):typeof i.toHexString=="function"&&St&&(i.id instanceof St||typeof i.id=="string")?i.id.length===12||i.id.length===24&&bt.test(i.id):!1},x.prototype={constructor:x,toHexString:function(){if(!this.id||!this.id.length)throw new Error("invalid ObjectId, ObjectId.id must be either a string or a Buffer, but is ["+JSON.stringify(this.id)+"]");if(this.id.length===24)return this.id;if(v(this.id))return this.id.toString("hex");for(var i="",s=0;s<this.id.length;s++)i+=At[this.id.charCodeAt(s)];return i},equals:function(i){return i instanceof x?this.toString()===i.toString():typeof i=="string"&&x.isValid(i)&&i.length===12&&v(this.id)?i===this.id.toString("binary"):typeof i=="string"&&x.isValid(i)&&i.length===24?i.toLowerCase()===this.toHexString():typeof i=="string"&&x.isValid(i)&&i.length===12?i===this.id:i!=null&&(i instanceof x||i.toHexString)?i.toHexString()===this.toHexString():!1},getTimestamp:function(){var i=new Date,s;return v(this.id)?s=this.id[3]|this.id[2]<<8|this.id[1]<<16|this.id[0]<<24:s=this.id.charCodeAt(3)|this.id.charCodeAt(2)<<8|this.id.charCodeAt(1)<<16|this.id.charCodeAt(0)<<24,i.setTime(Math.floor(s)*1e3),i},generate:function(i){typeof i!="number"&&(i=~~(Date.now()/1e3)),i=parseInt(i,10)%4294967295;var s=fr();return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255,ct>>16&255,ct>>8&255,ct&255,Tt>>8&255,Tt&255,s>>16&255,s>>8&255,s&255)}};function fr(){return It=(It+1)%16777215}function hr(i,s){return s=s.toString(16),s.length===i?s:"00000000".substring(s.length,i)+s}var ar=Symbol&&Symbol.for&&Symbol.for("nodejs.util.inspect.custom")||"inspect";x.prototype[ar]=function(){return"ObjectID("+this+")"},x.prototype.toJSON=x.prototype.toHexString,x.prototype.toString=x.prototype.toHexString;const Ut=i=>i?Array.isArray(i)?i:[i]:[],z=24,lr=[{diff:4,points:100},{diff:1*z,points:80},{diff:3*z,points:60},{diff:7*z,points:40},{diff:30*z,points:20},{diff:90*z,points:10}],Ct=({total:i,timestamps:s})=>{const h=new Date;return i*s.reduce((p,y)=>{const a=lr.find(({diff:l})=>y>zt(h,l).getTime());return a?p+a.points:p},0)/s.length},Rt=function(i){const{connections:s={}}=this,h=i||Object.keys(s)||[];return Ut(h).reduce((p,y)=>({...p,[y]:.5*Ct(s[y])}),{})},pr=function(i,s={}){const{directSearch:h={}}=this,{includeConnections:p=!0}=s,y=i||Object.keys(h)||[];return Ut(y).reduce((a,l)=>{const m=h[l],g=Object.keys(m);return{...a,...g.reduce((T,u)=>{const S=a[u]||0+T[u]||0;return{...T,[u]:S+Ct(m[u])}},{...p?Rt.bind(this)(g):{}})}},{})},yr=i=>{const{directSearch:s={}}=i||{},h=pr.bind(i);return{searchTerms:{...Object.keys(s).reduce((y,a)=>({...y,[a]:h(a,{includeConnections:!1})}),{})},connections:{...Rt.bind(i)()}}},wr=(i,s=10)=>i.update("directSearch",h=>h.map(p=>p.sort((y,a)=>{const l=y.get("timestamps");return a.get("timestamps").last()-l.last()}).slice(0,s))),mr=(i,s=10)=>{const h=p=>p.sort((y,a)=>{const l=y.get("timestamps");return a.get("timestamps").last()-l.last()}).first().get("timestamps").last();return i.update("directSearch",p=>p.sort((y,a)=>{const l=h(y);return h(a)-l}).slice(0,s))},gr=(i,s,h,p)=>{const y=h[i.id]||0,l=(h[s.id]||0)-y;if(!l){const m=mt(i,p),g=mt(s,p);return Jt(new Date(m),new Date(g))}return l},xr=i=>{const{searchTerms:s={},connections:h={}}=i;return Object.values(s).reduce((p,y)=>(Object.entries(y).forEach(([l,m])=>{const g=(p[l]??0)+m;p[l]=g}),p),{...h})},dr={calculateFullScoreMap:yr,pruneIdEntries:wr,pruneSearchTermEntries:mr,defaultChannelsSort:gr,createSorter:({cache:i,getOptionId:s=h=>h.id})=>{const h=xr(i);return(p,y)=>{const a=s(p),l=s(y),m=h[a]||0;return(h[l]||0)-m}}};self.addEventListener("message",({data:i}={})=>{if(/[{}]/.test(i))try{const s=JSON.parse(i),h=dr.calculateFullScoreMap(s);self.postMessage(h)}catch(s){console.error(`Frecency worker unable to process data: ${s}`)}})})();
//# sourceMappingURL=https://smaps.pumble.com/assets/source-maps/D71PV1Zj-worker.js.map
